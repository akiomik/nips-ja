NIP-23
======

ロングフォームコンテント/長文投稿
-----------------

`draft` `optional` `author:fiatjaf` `translator:rira224`

このNIPでは `kind:30023` (パラメータ化された置換可能なイベント) でロングフォームコンテント(長文投稿)、一般的に「記事」や「ブログ投稿」と呼ばれるものを定義する。
`kind:30024` は `kind:30023` と同じ構造を持ち、下書きを保存するために用いられる。

`kind:1` を主に取り扱うソーシャルクライアント(マイクロブログ系クライアント)には、このNIPの実装は必須でない。

### フォーマット

長文投稿の `.content` は、Markdown構文の文字列テキストでなければならない。異なるクライアントやデバイス間の互換性と可読性を最大化するために、長文投稿を作成する各クライアントは以下の制約に従う必要がある。

- テキストの強制改行を行ってはならない (MUST NOT) 。

- HTMLからMarkdownへの追加をサポートしてはならない (MUST NOT)。

### メタデータ

最終更新日については `.created_at` フィールドを使用し、 [NIP-21](21.md) で定義された `t` タグ (タグ/ハッシュタグ、その記事が関連するトピック) を含めることが望ましい。

その他メタデータフィールドは、必要に応じてイベントにタグを追加することができる。ここでは主要な4つのタグを標準化する(厳密には任意)。

- `"title"`, 記事のタイトル
- `"image"`, トップ画像のURL
- `"summary"`, 記事の要約
- `"published_at"`, 初版のUNIXタイムスタンプ(文字列化)

### Editability (編集可能性)

長文投稿は編集可能であることを意図しているため、パラメータ化された置換可能機能を利用し、記事の識別子を持つ `d` タグを含める必要がある。各クライアントは、 `d` タグを実装したイベントのみをリレーに発行し、読み取るように注意すべきである。また同じ記事の古い版を非表示にすることにも注意すべきである。

### リンク

[NIP-19](19.md) で定義された `naddr` コード(`a` タグを含む)を使って記事をリンクすることができる。

### 参照

他の投稿・記事・プロフィールへの参照は [NIP-27](27.md) に沿って行う必要がある。すなわち、 [NIP-21](21.md) で定義された `nostr:…` リンクをを使用し、任意でそのリンクに対応したタグを追加する(下記イベント例を参照)。

## イベント例

```json
{
  "kind": 30023,
  "created_at": 1675642635,
  "content": "Lorem [ipsum][nostr:nevent1qqst8cujky046negxgwwm5ynqwn53t8aqjr6afd8g59nfqwxpdhylpcpzamhxue69uhhyetvv9ujuetcv9khqmr99e3k7mg8arnc9] dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\n\nRead more at nostr:naddr1qqzkjurnw4ksz9thwden5te0wfjkccte9ehx7um5wghx7un8qgs2d90kkcq3nk2jry62dyf50k0h36rhpdtd594my40w9pkal876jxgrqsqqqa28pccpzu.",
  "tags": [
    ["d", "lorem-ipsum"],
    ["title", "Lorem Ipsum"],
    ["published_at", "1296962229"],
    ["t", "placeholder"],
    ["e", "b3e392b11f5d4f28321cedd09303a748acfd0487aea5a7450b3481c60b6e4f87", "wss://relay.example.com"],
    ["a", "30023:a695f6b60119d9521934a691347d9f78e8770b56da16bb255ee286ddf9fda919:ipsum", "wss://relay.nostr.org"]
  ],
  "pubkey": "...",
  "id": "..."
}
```
